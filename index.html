<!DOCTYPE html>
<html lang="el">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Î¤ÏÎ±Î³Î¹ÎºÎ¿Î¯ Î‰ÏÏ‰ÎµÏ‚ â€“ Smartboard (GR, 2/ÏƒÎµÎ¹ÏÎ¬, Î•Î¹ÎºÏŒÎ½ÎµÏ‚, ÎœÎµ ÎœÎµÏ„Î±Î´ÎµÎ´Î¿Î¼Î­Î½Î±)</title>
<style>
  /* ===== Î˜Î­Î¼Î± Light Cinnamon ===== */
  :root{
  --bg1: #f9f6fb; --bg2: #f0e6f9; --ink: #2a1a2f; --ink-soft: #5a4a5f;
  --tile1: #e6d4f5; --tile2: #d8c2f0; --tile3: #f0d9ff; --tile4: #d5bce6; --tile5: #e2c8f9; --tile6: #d9b3ff;
  --card: #fcfaff; --stat-bg: #f3e9fa; --stat-brd: #dcc5ef;
  --accent: #9b6bcc; --accent-strong: #7a4ea8; --gold: #b187d4; --ok: #4d9b78; --warn: #c2994f; --danger: #b6467d;
  --panel: rgba(250, 245, 255, .85); --panel-brd: #e0cbee;
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family:system-ui,-apple-system,Segoe UI,Inter,Roboto,sans-serif; color:var(--ink);
    background:radial-gradient(1200px 800px at 80% -10%, var(--bg2) 0%, var(--bg1) 60%), linear-gradient(180deg, #fffaf3, var(--bg1));
  }
  .wrap{max-width:1320px;margin:0 auto;padding:16px}
  h1{margin:0 0 6px;font-size:28px;letter-spacing:.3px}
  .sub{color:var(--ink-soft);margin-bottom:8px}
  .credit-inline{
    margin:6px 0 14px;text-align:center;font-weight:800;color:#6b3f20;background:#fff7ea;border:1px solid #edc9a9;padding:8px 12px;border-radius:12px
  }
  .panel{background:var(--panel);border:1px solid var(--panel-brd);border-radius:16px;padding:12px;backdrop-filter:blur(6px)}

  /* ÎˆÎ»ÎµÎ³Ï‡Î¿Î¹ */
  .controls{display:grid;grid-template-columns:1fr;gap:10px}
  @media(min-width:1100px){.controls{grid-template-columns:1.1fr 2fr 1fr}}
  .row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
  .pill{display:inline-flex;align-items:center;gap:8px;background:#fffaf2;border:1px solid var(--panel-brd);padding:6px 10px;border-radius:999px;color:var(--ink)}
  .btn, select, input[type="text"]{font-size:16px;padding:10px 12px;border-radius:12px;border:1px solid var(--panel-brd);background:#fffaf2;color:var(--ink)}
  .btn{cursor:pointer}
  .btn.primary{background:var(--gold);color:#2b1900;border:none;font-weight:800}
  .btn.warn{background:#ffd585;color:#3a2600;border:none;font-weight:800}
  .btn.danger{background:#ffd4cf;color:#4b0e0a;border:1px solid #f3a39b;font-weight:800}
  .btn:disabled{opacity:.55;cursor:not-allowed}
  .teamcount{display:inline-flex;align-items:center;gap:6px;background:#fffdf8;border:1px solid var(--panel-brd);border-radius:999px;padding:4px 8px}
  .teamcount button{width:36px;height:36px;border-radius:10px}
  .teamcount select{appearance:none;background:transparent;border:none;color:#2a1a12;font-weight:800;padding:6px 8px;outline:none;cursor:pointer}

  /* Info */
  .info-btn{position:fixed; right:16px; top:16px; width:50px; height:50px; border-radius:50%; background:var(--accent); color:#fff; font-weight:900; border:none; cursor:pointer; box-shadow:0 8px 18px rgba(0,0,0,.15); z-index:100}
  .info-btn:hover{ background:var(--accent-strong) }
  .modal{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:99; }
  .modal.open{ display:flex; }
  .backdrop{ position:absolute; inset:0; background:rgba(0,0,0,.25); }
  .sheet{ position:relative; max-width:900px; max-height:80vh; overflow:auto; background:#fffdf9; color:var(--ink); border:2px solid var(--panel-brd); border-radius:18px; padding:18px; box-shadow:0 20px 40px rgba(0,0,0,.25) }
  .sheet h2{ margin:6px 0 8px } .sheet h3{ margin:12px 0 6px } .sheet ul{ margin:6px 0 12px 20px }
  .closeX{ position:absolute; top:8px; right:8px; width:40px; height:40px; border-radius:50%; border:1px solid var(--panel-brd); background:#fffaf2; color:#2a1a12; font-size:20px; font-weight:900; cursor:pointer }

  /* Î”Î¹Î¬Ï„Î±Î¾Î· */
  .layout{margin-top:12px;display:grid;grid-template-columns:1fr;gap:12px}
  @media(min-width:1100px){.layout{grid-template-columns:1fr 320px}}
  .potbar{display:flex;justify-content:space-between;align-items:center;gap:10px}
  .legend{display:flex;gap:8px;flex-wrap:wrap}
  .badge{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;background:#fffdf8;border:1px solid var(--panel-brd);font-size:14px;color:var(--ink)}

  /* === Board: 2 ÎºÎ¬ÏÏ„ÎµÏ‚ Î±Î½Î¬ ÏƒÎµÎ¹ÏÎ¬ (Ï€Î¬Î½Ï„Î± Ï€Î¬Î½Ï‰ Î±Ï€ÏŒ 700px) === */
  .board{
    display:grid;
    grid-template-columns:1fr;   /* Ï€Î¿Î»Ï ÏƒÏ„ÎµÎ½Î­Ï‚ Î¿Î¸ÏŒÎ½ÎµÏ‚: 1 ÏƒÏ„Î®Î»Î· */
    gap:12px;
  }
  @media(min-width:700px){
    .board{ grid-template-columns:repeat(2, minmax(0, 1fr)); } /* 2 ÏƒÏ„Î®Î»ÎµÏ‚ */
  }

  /* Î Î»Î±ÎºÎ¯Î´Î¹Î± ÎŸÎ¼Î¬Î´Ï‰Î½ */
  .teambox{position:relative;padding-top:38px;border-radius:16px;overflow:hidden;border:1px solid #e9cdb4;box-shadow:0 8px 20px rgba(0,0,0,.15); min-height:320px}
  .teamhdr{position:absolute;top:6px;left:8px;right:8px;display:flex;align-items:center;justify-content:space-between;gap:8px;padding:6px 10px;border-radius:12px;background:#fffdf9;color:var(--ink);border:1px solid var(--panel-brd);font-weight:900;font-size:14px}
  .hdr-left{display:flex;align-items:center;gap:8px}
  .countBig{font-weight:900;padding:2px 10px;border-radius:999px;background:#fff7ea;color:#4a2c1a;border:1px solid #edc9a9}
  .turn{outline:3px solid var(--gold);outline-offset:3px}
  .out{opacity:.35;filter:grayscale(.3)}

  .card{margin:10px;background:var(--card);color:var(--ink);border-radius:18px;padding:12px;min-height:270px;box-shadow:0 6px 18px rgba(0,0,0,.12);display:grid;grid-template-rows:auto auto 1fr;gap:8px;border:1px solid #edd4bb}
  .card-title{font-weight:900;font-size:20px;display:flex;justify-content:space-between;align-items:center;gap:8px}
  .title-left{display:flex;align-items:center;gap:10px}

  /* ÎœÎ¹ÎºÏÎ¿-ÎµÎ¹ÎºÎ¿Î½Î¯Î´Î¹Î¿: ÎºÎ±ÏÏ†Î¯Ï„ÏƒÏ‰Î¼Î± ÏƒÏ„Î¿ Ï€Î¬Î½Ï‰ Î¼Î­ÏÎ¿Ï‚, ÎºÏŒÏˆÎ¹Î¼Î¿ Î±Ï€ÏŒ ÎºÎ¬Ï„Ï‰ */
  .thumb{
    width:42px;height:42px;border-radius:8px;flex:0 0 auto;
    background:#f0e0d1 top center/cover no-repeat; /* crop ÎºÎ¬Ï„Ï‰ */
    border:1px solid #e3c6ac; box-shadow:0 2px 6px rgba(0,0,0,.12)
  }

  /* ÎœÎµÏ„Î±Î´ÎµÎ´Î¿Î¼Î­Î½Î± (ÏƒÏ…Î³Î³ÏÎ±Ï†Î­Î±Ï‚ â€” Î­ÏÎ³Î¿) */
  .char-block{display:flex;flex-direction:column}
  .char-name{font-weight:900;line-height:1}
  .char-meta{font-size:.9em;color:#6b3e2e;margin-top:2px}

  .tag{display:none} /* Î´ÎµÎ½ Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î¿ÏÎ¼Îµ Ï€Î»Î­Î¿Î½ "set" tag */

  /* === Î£Ï„Î±Ï„Î¹ÏƒÏ„Î¹ÎºÎ¬ === */
  .stats{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:8px;
  }
  @media(max-width:900px){
    .stats{ grid-template-columns:1fr; } /* ÏƒÎµ Ï€Î¹Î¿ ÏƒÏ„ÎµÎ½Î¬, 1 ÏƒÏ„Î®Î»Î· */
  }
  .stat{border:1px solid var(--stat-brd);border-radius:12px;padding:10px;display:flex;justify-content:space-between;gap:8px;background:var(--stat-bg);font-weight:800;cursor:pointer;min-height:40px}
  .stat span{line-height:1.2}
  .stat.active{background:var(--accent);color:#fff;border-color:var(--accent-strong)}
  .stat.winner{outline:3px solid var(--ok)}
  .card-back{margin:10px;min-height:270px;border-radius:18px;background:linear-gradient(135deg,#fff2e1,#fffdf9);display:grid;place-items:center;color:#5a1f08;font-weight:900;box-shadow:0 6px 18px rgba(0,0,0,.12);border:1px solid #edd4bb}
  .foot{font-size:12px;color:#6b3f2b}

  /* Î Î»Î¬Ï„ÎµÏ‚ ÎºÎ±ÏÏ„ÏÎ½ Î¼Îµ ÎµÎ¹ÎºÏŒÎ½Î± (Ï‡Ï‰ÏÎ¯Ï‚ ÏŒÎ½Î¿Î¼Î±), crop Î±Ï€ÏŒ ÎºÎ¬Ï„Ï‰ */
  .card-back.imgback{
    background-size: cover;
    background-position: top center;   /* crop ÎºÎ¬Ï„Ï‰ */
    background-repeat: no-repeat;
    position: relative;
  }

  .winner,.tie{padding:10px 12px;border-radius:12px;font-weight:800}
  .winner{background:#e9f8ef;border:1px solid #bfe7ce;color:#124d2d}
  .tie{background:#fff6db;border:1px solid #f1d991;color:#6b4a0d}

  .side{display:grid;gap:10px}
  .side h3{margin:0;font-size:16px;color:var(--ink)}
  .catbtns{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:8px}
  .catbtns button{background:var(--accent);color:#fff;border:1px solid var(--accent-strong);border-radius:12px;padding:10px;font-weight:900;cursor:pointer}

  .log{margin-top:6px;height:110px;overflow:auto;background:#fffaf2;border:1px solid var(--panel-brd);border-radius:10px;padding:8px;font-size:12px;color:var(--ink)}
  .scoreboard{display:grid;gap:8px}
  .scoreRow{display:flex;align-items:center;justify-content:space-between;gap:8px;background:#fffdf8;border:1px solid var(--panel-brd);border-radius:12px;padding:8px}
  .scoreLeft{display:flex;align-items:center;gap:10px}
  .swatch{width:18px;height:18px;border-radius:4px;border:1px solid #dcb792}
  .pill{font-weight:900;background:#fff7ea;border:1px solid #edc9a9;border-radius:999px;padding:4px 10px;color:#2a1a12}

  footer{margin:16px auto 24px;max-width:1320px;text-align:center;font-weight:800;color:#6b3f20;background:#fff7ea;border:1px solid #edc9a9;padding:12px;border-radius:12px}
</style>
</head>
<body>
<button class="info-btn" id="infoBtn" aria-label="ÎŸÎ´Î·Î³Î¯ÎµÏ‚">i</button>

<div class="wrap">
  <h1>Î‘ÏÏ‡Î±Î¯ÎµÏ‚ Î•Î»Î»Î·Î½Î¹ÎºÎ­Ï‚ Î¤Î±Î³Ï‰Î´Î¯ÎµÏ‚ â€“ Top Trumps</h1>
  <div class="sub">Î¡Î¿Î®: <b>ÎˆÎ½Î±ÏÎ¾Î· â†’ ÎµÏ€Î¹Î»Î¿Î³Î® ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯Î±Ï‚ â†’ Î‘Ï€Î¿ÎºÎ¬Î»Ï…ÏˆÎ· & Î£ÏÎ³ÎºÏÎ¹ÏƒÎ· â†’ Î•Ï€ÏŒÎ¼ÎµÎ½Î¿Ï‚ Î³ÏÏÎ¿Ï‚</b>. ÎŸ Ï€Î¯Î½Î±ÎºÎ±Ï‚ Î´ÎµÎ¯Ï‡Î½ÎµÎ¹ Ï€ÏŒÏƒÎµÏ‚ ÎºÎ¬ÏÏ„ÎµÏ‚ ÎºÏÎ±Ï„Î¬ ÎºÎ¬Î¸Îµ Î¿Î¼Î¬Î´Î±.</div>
  <div class="credit-inline">âœ¨âœï¸ Devised by Panagiotis Domvros, English and Drama Teacher, All Rights Reserved âœï¸âœ¨</div>

  <!-- ÎˆÎ»ÎµÎ³Ï‡Î¿Î¹ -->
  <div class="panel controls">
    <div class="row">
      <div class="pill">
        <strong>ÎŸÎ¼Î¬Î´ÎµÏ‚</strong>
        <span class="teamcount">
          <button class="btn" id="decTeams" title="Î›Î¹Î³ÏŒÏ„ÎµÏÎµÏ‚">âˆ’</button>
          <select id="teamCount" title="Î Î»Î®Î¸Î¿Ï‚ Î¿Î¼Î¬Î´Ï‰Î½">
            <option>2</option><option>3</option><option selected>4</option><option>5</option><option>6</option>
          </select>
          <button class="btn" id="incTeams" title="Î ÎµÏÎ¹ÏƒÏƒÏŒÏ„ÎµÏÎµÏ‚">+</button>
        </span>
      </div>
      <button class="btn" id="randomizeColors">Î‘Î½Î¬Î¼ÎµÎ¹Î¾Î· Î§ÏÏ‰Î¼Î¬Ï„Ï‰Î½</button>
    </div>

    <div class="row" id="teamEdit"></div>

    <div class="row" style="justify-content:flex-end;">
      <button class="btn warn" id="importBtn">Î•Î¹ÏƒÎ±Î³Ï‰Î³Î® Î¤ÏÎ¬Ï€Î¿Ï…Î»Î±Ï‚ (JSON)</button>
      <input type="file" id="fileInput" accept=".json" style="display:none" />
      <button class="btn primary" id="startBtn">ÎˆÎ½Î±ÏÎ¾Î·</button>
      <button class="btn danger" id="resetBtn">Î•Ï€Î±Î½Î±Ï†Î¿ÏÎ¬</button>
    </div>
  </div>

  <!-- Î”Î¹Î¬Ï„Î±Î¾Î· -->
  <div class="layout">

    <!-- Î‘ÏÎ¹ÏƒÏ„ÎµÏÎ¬: Î£ÎºÎ·Î½Î® -->
    <div class="panel">
      <div class="potbar">
        <div class="legend">
          <span class="badge">Î•Î½ÎµÏÎ³Î® Î¿Î¼Î¬Î´Î±:</span>
          <strong id="activeTeamName">â€”</strong>
        </div>
        <div class="legend">
          <span class="badge">Î£Ï„Î¿Î¯Î²Î± <strong id="potCount">0</strong></span>
          <span class="badge">Î•ÎºÏ„ÏŒÏ‚ Î¤ÏÎ¬Ï€Î¿Ï…Î»Î±Ï‚ <strong id="unusedCount">0</strong></span>
          <span class="badge">Î“ÏÏÎ¿Ï‚ <strong id="roundNum">0</strong></span>
          <span class="badge">ÎœÎ­Î³ÎµÎ¸Î¿Ï‚ Î¤ÏÎ¬Ï€Î¿Ï…Î»Î±Ï‚ <strong id="deckSize">25</strong></span>
        </div>
      </div>

      <div class="board" id="teamsArea"></div>

      <div style="margin-top:10px; display:flex; gap:8px; flex-wrap:wrap;">
        <div id="status" class="winner" style="display:none;"></div>
        <div id="statusTie" class="tie" style="display:none;"></div>
        <button id="revealBtn" class="btn primary" disabled>Î‘Ï€Î¿ÎºÎ¬Î»Ï…ÏˆÎ· & Î£ÏÎ³ÎºÏÎ¹ÏƒÎ·</button>
        <button id="nextBtn" class="btn" disabled>Î•Ï€ÏŒÎ¼ÎµÎ½Î¿Ï‚ Î“ÏÏÎ¿Ï‚</button>
      </div>

      <div class="log" id="logBox"></div>
    </div>

    <!-- Î”ÎµÎ¾Î¹Î¬: ÎšÎ±Ï„Î·Î³Î¿ÏÎ¯ÎµÏ‚ + Î£ÎºÎ¿Ï -->
    <div class="panel side">
      <h3>Î•Ï€Î¹Î»Î¿Î³Î® ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯Î±Ï‚</h3>
      <div class="catbtns" id="categoryButtons"></div>

      <h3 style="margin-top:8px;">Î Î¯Î½Î±ÎºÎ±Ï‚ Î£ÎºÎ¿Ï</h3>
      <div class="scoreboard" id="scoreboard"></div>
    </div>

  </div>
</div>

<!-- Modal ÎŸÎ´Î·Î³Î¹ÏÎ½ -->
<div class="modal" id="infoModal" aria-hidden="true" role="dialog">
  <div class="backdrop" id="infoBackdrop"></div>
  <div class="sheet" role="document" aria-label="ÎŸÎ´Î·Î³Î¯ÎµÏ‚">
    <button class="closeX" id="infoClose" aria-label="ÎšÎ»ÎµÎ¯ÏƒÎ¹Î¼Î¿">Ã—</button>
    <h2>Î ÏÏ‚ Ï€Î±Î¯Î¶ÎµÏ„Î±Î¹ â€“ Î¤ÏÎ±Î³Î¹ÎºÎ¿Î¯ Î‰ÏÏ‰ÎµÏ‚</h2>
    <p>Î£Ï‡Î¿Î»Î¹ÎºÎ®, smartboard-friendly ÎµÎºÎ´Î¿Ï‡Î® Ï€Î±Î¹Ï‡Î½Î¹Î´Î¹Î¿Ï ÏƒÏÎ³ÎºÏÎ¹ÏƒÎ·Ï‚. Î£Ï„ÏŒÏ‡Î¿Ï‚: Î½Î± ÎºÎµÏÎ´Î¯ÏƒÎµÎ¹Ï‚ ÎºÎ¬ÏÏ„ÎµÏ‚ ÎµÏ€Î¹Î»Î­Î³Î¿Î½Ï„Î±Ï‚ Ï„Î·Î½ Î¹ÏƒÏ‡Ï…ÏÏŒÏ„ÎµÏÎ· ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯Î± ÏƒÏ„Î·Î½ ÎºÎ¿ÏÏ…Ï†Î±Î¯Î± ÏƒÎ¿Ï… ÎºÎ¬ÏÏ„Î±.</p>

    <h3>Î£Ï„Î®ÏƒÎ¹Î¼Î¿</h3>
    <ul>
      <li>Î”Î¹Î¬Î»ÎµÎ¾Îµ <b>2â€“6 Î¿Î¼Î¬Î´ÎµÏ‚</b> ÎºÎ±Î¹ (Î±Î½ Î¸Î­Î»ÎµÎ¹Ï‚) Î¬Î»Î»Î±Î¾Îµ Î¿Î½ÏŒÎ¼Î±Ï„Î±.</li>
      <li>Î ÏÎ¿Î±Î¹ÏÎµÏ„Î¹ÎºÎ¬: <b>Î•Î¹ÏƒÎ±Î³Ï‰Î³Î® Î¤ÏÎ¬Ï€Î¿Ï…Î»Î±Ï‚ (JSON)</b> Î³Î¹Î± Î´Î¹ÎºÎ­Ï‚ ÏƒÎ¿Ï… ÎºÎ¬ÏÏ„ÎµÏ‚.</li>
      <li>Î Î¬Ï„Î·ÏƒÎµ <b>ÎˆÎ½Î±ÏÎ¾Î·</b>. ÎŸÎ¹ ÎºÎ¬ÏÏ„ÎµÏ‚ Î±Î½Î±ÎºÎ±Ï„ÎµÏÎ¿Î½Ï„Î±Î¹ ÎºÎ±Î¹ Î¼Î¿Î¹ÏÎ¬Î¶Î¿Î½Ï„Î±Î¹ Î¹ÏƒÏŒÏ€Î¿ÏƒÎ±. <b>ÎœÎ¯Î± ÎºÎ¬ÏÏ„Î± Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Î¼ÎµÎ¯Î½ÎµÎ¹ Â«ÎµÎºÏ„ÏŒÏ‚Â»</b> (ÎµÎºÏ„ÏŒÏ‚ Î±Î½ ÎµÎ¯Î½Î±Î¹ 5 Î¿Î¼Î¬Î´ÎµÏ‚).</li>
    </ul>

    <h3>Î¡Î¿Î® Î³ÏÏÎ¿Ï…</h3>
    <ol>
      <li>Î— <b>ÎµÎ½ÎµÏÎ³Î® Î¿Î¼Î¬Î´Î±</b> Î²Î»Î­Ï€ÎµÎ¹ Ï„Î· Î´Î¹ÎºÎ® Ï„Î·Ï‚ ÎºÎ¿ÏÏ…Ï†Î±Î¯Î± ÎºÎ¬ÏÏ„Î± (Î¿Î¹ Î¬Î»Î»ÎµÏ‚ ÎµÎ¯Î½Î±Î¹ ÎºÎ»ÎµÎ¹ÏƒÏ„Î­Ï‚).</li>
      <li>Î•Ï€Î¹Î»Î­Î³ÎµÎ¹ <b>ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯Î±</b> Ï€Î¬Î½Ï‰ ÏƒÏ„Î·Î½ ÎºÎ¬ÏÏ„Î± Î® Î¼Îµ Ï„Î± ÎºÎ¿Ï…Î¼Ï€Î¹Î¬ Î´ÎµÎ¾Î¹Î¬.</li>
      <li>Î Î¬Ï„Î·ÏƒÎµ <b>Î‘Ï€Î¿ÎºÎ¬Î»Ï…ÏˆÎ· & Î£ÏÎ³ÎºÏÎ¹ÏƒÎ·</b>: Î±Î½Î¿Î¯Î³Î¿Ï…Î½ ÏŒÎ»ÎµÏ‚ ÎºÎ±Î¹ ÏƒÏ…Î³ÎºÏÎ¯Î½Î¿Ï…Î¼Îµ. Î— Ï…ÏˆÎ·Î»ÏŒÏ„ÎµÏÎ· Ï„Î¹Î¼Î® <b>ÎºÎµÏÎ´Î¯Î¶ÎµÎ¹</b>. <b>Î™ÏƒÎ¿Ï€Î±Î»Î¯Î±;</b> ÎŸÎ¹ ÎºÎ¬ÏÏ„ÎµÏ‚ Ï€Î¬Î½Îµ ÏƒÏ„Î· <b>Î£Ï„Î¿Î¯Î²Î±</b>.</li>
      <li>Î Î¬Ï„Î·ÏƒÎµ <b>Î•Ï€ÏŒÎ¼ÎµÎ½Î¿Ï‚ Î“ÏÏÎ¿Ï‚</b>. ÎŸ Î½Î¹ÎºÎ·Ï„Î®Ï‚ ÎµÏ€Î¹Î»Î­Î³ÎµÎ¹ Ï„Î·Î½ ÎµÏ€ÏŒÎ¼ÎµÎ½Î· ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯Î±.</li>
    </ol>

    <h3>ÎšÎ¿Ï…Î¼Ï€Î¹Î¬ & UI</h3>
    <ul>
      <li><b>ÎŸÎ¼Î¬Î´ÎµÏ‚ â€“/+/Î»Î¯ÏƒÏ„Î±:</b> Î¿ÏÎ¹ÏƒÎ¼ÏŒÏ‚ 2â€“6 Î¿Î¼Î¬Î´Ï‰Î½.</li>
      <li><b>Î‘Î½Î¬Î¼ÎµÎ¹Î¾Î· Î§ÏÏ‰Î¼Î¬Ï„Ï‰Î½:</b> Î±Î»Î»Î¬Î¶ÎµÎ¹ Ï„Î± Ï‡ÏÏÎ¼Î±Ï„Î± Ï„Ï‰Î½ Ï€Î»Î±ÎºÎ¹Î´Î¯Ï‰Î½.</li>
      <li><b>Î•Î¹ÏƒÎ±Î³Ï‰Î³Î® Î¤ÏÎ¬Ï€Î¿Ï…Î»Î±Ï‚ (JSON):</b> Ï†ÏŒÏÏ„Ï‰ÏƒÎ· Î´Î¹ÎºÏÎ½ ÏƒÎ¿Ï… ÎºÎ±ÏÏ„ÏÎ½.</li>
      <li><b>ÎˆÎ½Î±ÏÎ¾Î·:</b> Î¼Î¿Î¹ÏÎ¬Î¶ÎµÎ¹ ÎºÎ±Î¹ Î¾ÎµÎºÎ¹Î½Î¬ Î“ÏÏÎ¿ 1.</li>
      <li><b>Î•Ï€Î±Î½Î±Ï†Î¿ÏÎ¬:</b> ÎµÏ€Î¹ÏƒÏ„ÏÎ¿Ï†Î® ÏƒÏ„Î·Î½ Ï€ÏÎ¿ÎµÏ€Î¹Î»ÎµÎ³Î¼Î­Î½Î· Ï„ÏÎ¬Ï€Î¿Ï…Î»Î±.</li>
      <li><b>Î‘Ï€Î¿ÎºÎ¬Î»Ï…ÏˆÎ· & Î£ÏÎ³ÎºÏÎ¹ÏƒÎ· / Î•Ï€ÏŒÎ¼ÎµÎ½Î¿Ï‚ Î“ÏÏÎ¿Ï‚</b>.</li>
      <li><b>Î£Ï„Î¿Î¯Î²Î± / Î•ÎºÏ„ÏŒÏ‚ Î¤ÏÎ¬Ï€Î¿Ï…Î»Î±Ï‚ / Î“ÏÏÎ¿Ï‚ / ÎœÎ­Î³ÎµÎ¸Î¿Ï‚ Î¤ÏÎ¬Ï€Î¿Ï…Î»Î±Ï‚</b>: Î´ÎµÎ¯ÎºÏ„ÎµÏ‚ ÏƒÏ„Î·Î½ ÎºÎ¿ÏÏ…Ï†Î®.</li>
    </ul>
  </div>
</div>

<footer>âœ¨âœï¸ Devised by Panagiotis Domvros, English and Drama Teacher, All Rights Reserved âœï¸âœ¨</footer>

<script>
/* ===== Î¤ÏÎ¬Ï€Î¿Ï…Î»Î± 25 ÎºÎ±ÏÏ„ÏÎ½: Î‘ÏÏ‡Î±Î¯Î± Î•Î»Î»Î·Î½Î¹ÎºÎ® Î¤ÏÎ±Î³Ï‰Î´Î¯Î± =====
   ÎšÎ±Ï„Î·Î³Î¿ÏÎ¯ÎµÏ‚ (0â€“100): Î¦ÏÏŒÎ½Î·ÏƒÎ·, Î‘Î½Î´ÏÎµÎ¯Î±, Î¤ÏÎ±Î³Î¹ÎºÏŒÎ ÎµÏ€ÏÏ‰Î¼Î­Î½Î¿, ÎˆÏÏ‰Ï‚, Î”ÏŒÎ»Î¿Ï‚, Î•Ï€Î¹ÏÏÎ¿Î®
   Î ÎµÏÎ¹Î»Î±Î¼Î²Î¬Î½ÎµÎ¹: name, author, play, stats
*/
var DEFAULT_DECK = [
  { name:"ÎŸÎ¹Î´Î¯Ï€Î¿Ï…Ï‚", author:"Î£Î¿Ï†Î¿ÎºÎ»Î®Ï‚", play:"ÎŸÎ¹Î´Î¯Ï€Î¿Ï…Ï‚ Î¤ÏÏÎ±Î½Î½Î¿Ï‚", stats:{ Î¦ÏÏŒÎ½Î·ÏƒÎ·:90, Î‘Î½Î´ÏÎµÎ¯Î±:75, Î¤ÏÎ±Î³Î¹ÎºÏŒÎ ÎµÏ€ÏÏ‰Î¼Î­Î½Î¿:100, ÎˆÏÏ‰Ï‚:40, Î”ÏŒÎ»Î¿Ï‚:20, Î•Ï€Î¹ÏÏÎ¿Î®:95 } },
  { name:"Î™Î¿ÎºÎ¬ÏƒÏ„Î·", author:"Î£Î¿Ï†Î¿ÎºÎ»Î®Ï‚", play:"ÎŸÎ¹Î´Î¯Ï€Î¿Ï…Ï‚ Î¤ÏÏÎ±Î½Î½Î¿Ï‚", stats:{ Î¦ÏÏŒÎ½Î·ÏƒÎ·:72, Î‘Î½Î´ÏÎµÎ¯Î±:60, Î¤ÏÎ±Î³Î¹ÎºÏŒÎ ÎµÏ€ÏÏ‰Î¼Î­Î½Î¿:95,  ÎˆÏÏ‰Ï‚:65, Î”ÏŒÎ»Î¿Ï‚:25, Î•Ï€Î¹ÏÏÎ¿Î®:70 } },
  { name:"Î¤ÎµÎ¹ÏÎµÏƒÎ¯Î±Ï‚", author:"Î£Î¿Ï†Î¿ÎºÎ»Î®Ï‚", play:"ÎŸÎ¹Î´Î¯Ï€Î¿Ï…Ï‚ Î¤ÏÏÎ±Î½Î½Î¿Ï‚", stats:{ Î¦ÏÏŒÎ½Î·ÏƒÎ·:98, Î‘Î½Î´ÏÎµÎ¯Î±:55, Î¤ÏÎ±Î³Î¹ÎºÏŒÎ ÎµÏ€ÏÏ‰Î¼Î­Î½Î¿:70,  ÎˆÏÏ‰Ï‚:20, Î”ÏŒÎ»Î¿Ï‚:15, Î•Ï€Î¹ÏÏÎ¿Î®:86 } },

  { name:"Î‘Î½Ï„Î¹Î³ÏŒÎ½Î·", author:"Î£Î¿Ï†Î¿ÎºÎ»Î®Ï‚", play:"Î‘Î½Ï„Î¹Î³ÏŒÎ½Î·", stats:{ Î¦ÏÏŒÎ½Î·ÏƒÎ·:85, Î‘Î½Î´ÏÎµÎ¯Î±:92, Î¤ÏÎ±Î³Î¹ÎºÏŒÎ ÎµÏ€ÏÏ‰Î¼Î­Î½Î¿:90,  ÎˆÏÏ‰Ï‚:55, Î”ÏŒÎ»Î¿Ï‚:10, Î•Ï€Î¹ÏÏÎ¿Î®:88 } },
  { name:"ÎšÏÎ­Ï‰Î½", author:"Î£Î¿Ï†Î¿ÎºÎ»Î®Ï‚", play:"Î‘Î½Ï„Î¹Î³ÏŒÎ½Î·", stats:{ Î¦ÏÏŒÎ½Î·ÏƒÎ·:70, Î‘Î½Î´ÏÎµÎ¯Î±:80, Î¤ÏÎ±Î³Î¹ÎºÏŒÎ ÎµÏ€ÏÏ‰Î¼Î­Î½Î¿:85,  ÎˆÏÏ‰Ï‚:30, Î”ÏŒÎ»Î¿Ï‚:35, Î•Ï€Î¹ÏÏÎ¿Î®:90 } },

  { name:"Î‘Î¯Î±Ï‚", author:"Î£Î¿Ï†Î¿ÎºÎ»Î®Ï‚", play:"Î‘Î¯Î±Ï‚", stats:{ Î¦ÏÏŒÎ½Î·ÏƒÎ·:65, Î‘Î½Î´ÏÎµÎ¯Î±:96, Î¤ÏÎ±Î³Î¹ÎºÏŒÎ ÎµÏ€ÏÏ‰Î¼Î­Î½Î¿:90,  ÎˆÏÏ‰Ï‚:20, Î”ÏŒÎ»Î¿Ï‚:10, Î•Ï€Î¹ÏÏÎ¿Î®:80 } },
  { name:"Î¤Î­ÎºÎ¼Î·ÏƒÏƒÎ±", author:"Î£Î¿Ï†Î¿ÎºÎ»Î®Ï‚", play:"Î‘Î¯Î±Ï‚", stats:{ Î¦ÏÏŒÎ½Î·ÏƒÎ·:75, Î‘Î½Î´ÏÎµÎ¯Î±:70, Î¤ÏÎ±Î³Î¹ÎºÏŒÎ ÎµÏ€ÏÏ‰Î¼Î­Î½Î¿:82,  ÎˆÏÏ‰Ï‚:60, Î”ÏŒÎ»Î¿Ï‚:15, Î•Ï€Î¹ÏÏÎ¿Î®:66 } },

  { name:"Î¦Î¹Î»Î¿ÎºÏ„Î®Ï„Î·Ï‚", author:"Î£Î¿Ï†Î¿ÎºÎ»Î®Ï‚", play:"Î¦Î¹Î»Î¿ÎºÏ„Î®Ï„Î·Ï‚", stats:{ Î¦ÏÏŒÎ½Î·ÏƒÎ·:82, Î‘Î½Î´ÏÎµÎ¯Î±:78, Î¤ÏÎ±Î³Î¹ÎºÏŒÎ ÎµÏ€ÏÏ‰Î¼Î­Î½Î¿:88,  ÎˆÏÏ‰Ï‚:28, Î”ÏŒÎ»Î¿Ï‚:12, Î•Ï€Î¹ÏÏÎ¿Î®:74 } },
  { name:"ÎÎµÎ¿Ï€Ï„ÏŒÎ»ÎµÎ¼Î¿Ï‚", author:"Î£Î¿Ï†Î¿ÎºÎ»Î®Ï‚", play:"Î¦Î¹Î»Î¿ÎºÏ„Î®Ï„Î·Ï‚", stats:{ Î¦ÏÏŒÎ½Î·ÏƒÎ·:72, Î‘Î½Î´ÏÎµÎ¯Î±:85, Î¤ÏÎ±Î³Î¹ÎºÏŒÎ ÎµÏ€ÏÏ‰Î¼Î­Î½Î¿:78,  ÎˆÏÏ‰Ï‚:30, Î”ÏŒÎ»Î¿Ï‚:18, Î•Ï€Î¹ÏÏÎ¿Î®:70 } },

  { name:"Î—ÏÎ±ÎºÎ»Î®Ï‚", author:"Î£Î¿Ï†Î¿ÎºÎ»Î®Ï‚", play:"Î¤ÏÎ±Ï‡Î¯Î½Î¹Î±Î¹", stats:{ Î¦ÏÏŒÎ½Î·ÏƒÎ·:68, Î‘Î½Î´ÏÎµÎ¯Î±:98, Î¤ÏÎ±Î³Î¹ÎºÏŒÎ ÎµÏ€ÏÏ‰Î¼Î­Î½Î¿:80,  ÎˆÏÏ‰Ï‚:35, Î”ÏŒÎ»Î¿Ï‚:15, Î•Ï€Î¹ÏÏÎ¿Î®:88 } },
  { name:"Î”Î·Î¹Î¬Î½ÎµÎ¹ÏÎ±", author:"Î£Î¿Ï†Î¿ÎºÎ»Î®Ï‚", play:"Î¤ÏÎ±Ï‡Î¯Î½Î¹Î±Î¹", stats:{ Î¦ÏÏŒÎ½Î·ÏƒÎ·:74, Î‘Î½Î´ÏÎµÎ¯Î±:60, Î¤ÏÎ±Î³Î¹ÎºÏŒÎ ÎµÏ€ÏÏ‰Î¼Î­Î½Î¿:85,  ÎˆÏÏ‰Ï‚:65, Î”ÏŒÎ»Î¿Ï‚:20, Î•Ï€Î¹ÏÏÎ¿Î®:70 } },

  { name:"Î—Î»Î­ÎºÏ„ÏÎ±", author:"Î£Î¿Ï†Î¿ÎºÎ»Î®Ï‚", play:"Î—Î»Î­ÎºÏ„ÏÎ±", stats:{ Î¦ÏÏŒÎ½Î·ÏƒÎ·:82, Î‘Î½Î´ÏÎµÎ¯Î±:78, Î¤ÏÎ±Î³Î¹ÎºÏŒÎ ÎµÏ€ÏÏ‰Î¼Î­Î½Î¿:85,  ÎˆÏÏ‰Ï‚:40, Î”ÏŒÎ»Î¿Ï‚:30, Î•Ï€Î¹ÏÏÎ¿Î®:74 } },

  { name:"Î‘Î³Î±Î¼Î­Î¼Î½Ï‰Î½", author:"Î‘Î¹ÏƒÏ‡ÏÎ»Î¿Ï‚", play:"Î‘Î³Î±Î¼Î­Î¼Î½Ï‰Î½", stats:{ Î¦ÏÏŒÎ½Î·ÏƒÎ·:76, Î‘Î½Î´ÏÎµÎ¯Î±:88, Î¤ÏÎ±Î³Î¹ÎºÏŒÎ ÎµÏ€ÏÏ‰Î¼Î­Î½Î¿:90,  ÎˆÏÏ‰Ï‚:35, Î”ÏŒÎ»Î¿Ï‚:25, Î•Ï€Î¹ÏÏÎ¿Î®:85 } },
  { name:"ÎšÎ»Ï…Ï„Î±Î¹Î¼Î½Î®ÏƒÏ„ÏÎ±", author:"Î‘Î¹ÏƒÏ‡ÏÎ»Î¿Ï‚", play:"Î‘Î³Î±Î¼Î­Î¼Î½Ï‰Î½", stats:{ Î¦ÏÏŒÎ½Î·ÏƒÎ·:86, Î‘Î½Î´ÏÎµÎ¯Î±:70, Î¤ÏÎ±Î³Î¹ÎºÏŒÎ ÎµÏ€ÏÏ‰Î¼Î­Î½Î¿:88,  ÎˆÏÏ‰Ï‚:50, Î”ÏŒÎ»Î¿Ï‚:97, Î•Ï€Î¹ÏÏÎ¿Î®:92 } },
  { name:"ÎšÎ±ÏƒÏƒÎ¬Î½Î´ÏÎ±", author:"Î‘Î¹ÏƒÏ‡ÏÎ»Î¿Ï‚", play:"Î‘Î³Î±Î¼Î­Î¼Î½Ï‰Î½", stats:{ Î¦ÏÏŒÎ½Î·ÏƒÎ·:92, Î‘Î½Î´ÏÎµÎ¯Î±:62, Î¤ÏÎ±Î³Î¹ÎºÏŒÎ ÎµÏ€ÏÏ‰Î¼Î­Î½Î¿:95,  ÎˆÏÏ‰Ï‚:30, Î”ÏŒÎ»Î¿Ï‚:15, Î•Ï€Î¹ÏÏÎ¿Î®:80 } },

  { name:"Î ÏÎ¿Î¼Î·Î¸Î­Î±Ï‚", author:"Î‘Î¹ÏƒÏ‡ÏÎ»Î¿Ï‚", play:"Î ÏÎ¿Î¼Î·Î¸Î­Î±Ï‚ Î”ÎµÏƒÎ¼ÏÏ„Î·Ï‚", stats:{ Î¦ÏÏŒÎ½Î·ÏƒÎ·:98, Î‘Î½Î´ÏÎµÎ¯Î±:88, Î¤ÏÎ±Î³Î¹ÎºÏŒÎ ÎµÏ€ÏÏ‰Î¼Î­Î½Î¿:85,  ÎˆÏÏ‰Ï‚:25, Î”ÏŒÎ»Î¿Ï‚:20, Î•Ï€Î¹ÏÏÎ¿Î®:92 } },

  { name:"ÎœÎ®Î´ÎµÎ¹Î±", author:"Î•Ï…ÏÎ¹Ï€Î¯Î´Î·Ï‚", play:"ÎœÎ®Î´ÎµÎ¹Î±", stats:{ Î¦ÏÏŒÎ½Î·ÏƒÎ·:88, Î‘Î½Î´ÏÎµÎ¯Î±:82, Î¤ÏÎ±Î³Î¹ÎºÏŒÎ ÎµÏ€ÏÏ‰Î¼Î­Î½Î¿:92,  ÎˆÏÏ‰Ï‚:60, Î”ÏŒÎ»Î¿Ï‚:98, Î•Ï€Î¹ÏÏÎ¿Î®:90 } },
  { name:"Î™Î¬ÏƒÏ‰Î½", author:"Î•Ï…ÏÎ¹Ï€Î¯Î´Î·Ï‚", play:"ÎœÎ®Î´ÎµÎ¹Î±", stats:{ Î¦ÏÏŒÎ½Î·ÏƒÎ·:78, Î‘Î½Î´ÏÎµÎ¯Î±:75, Î¤ÏÎ±Î³Î¹ÎºÏŒÎ ÎµÏ€ÏÏ‰Î¼Î­Î½Î¿:80,  ÎˆÏÏ‰Ï‚:45, Î”ÏŒÎ»Î¿Ï‚:60, Î•Ï€Î¹ÏÏÎ¿Î®:72 } },

  { name:"Î”Î¹ÏŒÎ½Ï…ÏƒÎ¿Ï‚", author:"Î•Ï…ÏÎ¹Ï€Î¯Î´Î·Ï‚", play:"Î’Î¬ÎºÏ‡ÎµÏ‚", stats:{ Î¦ÏÏŒÎ½Î·ÏƒÎ·:94, Î‘Î½Î´ÏÎµÎ¯Î±:70, Î¤ÏÎ±Î³Î¹ÎºÏŒÎ ÎµÏ€ÏÏ‰Î¼Î­Î½Î¿:60,  ÎˆÏÏ‰Ï‚:55, Î”ÏŒÎ»Î¿Ï‚:85, Î•Ï€Î¹ÏÏÎ¿Î®:95 } },
  { name:"Î ÎµÎ½Î¸Î­Î±Ï‚", author:"Î•Ï…ÏÎ¹Ï€Î¯Î´Î·Ï‚", play:"Î’Î¬ÎºÏ‡ÎµÏ‚", stats:{ Î¦ÏÏŒÎ½Î·ÏƒÎ·:72, Î‘Î½Î´ÏÎµÎ¯Î±:82, Î¤ÏÎ±Î³Î¹ÎºÏŒÎ ÎµÏ€ÏÏ‰Î¼Î­Î½Î¿:90,  ÎˆÏÏ‰Ï‚:25, Î”ÏŒÎ»Î¿Ï‚:20, Î•Ï€Î¹ÏÏÎ¿Î®:76 } },

  { name:"Î™Ï†Î¹Î³Î­Î½ÎµÎ¹Î±", author:"Î•Ï…ÏÎ¹Ï€Î¯Î´Î·Ï‚", play:"Î™Ï†Î¹Î³Î­Î½ÎµÎ¹Î± ÎµÎ½ Î‘Ï…Î»Î¯Î´Î¹", stats:{ Î¦ÏÏŒÎ½Î·ÏƒÎ·:84, Î‘Î½Î´ÏÎµÎ¯Î±:72, Î¤ÏÎ±Î³Î¹ÎºÏŒÎ ÎµÏ€ÏÏ‰Î¼Î­Î½Î¿:92,  ÎˆÏÏ‰Ï‚:45, Î”ÏŒÎ»Î¿Ï‚:10, Î•Ï€Î¹ÏÏÎ¿Î®:78 } },
  { name:"ÎŸÏÎ­ÏƒÏ„Î·Ï‚", author:"Î•Ï…ÏÎ¹Ï€Î¯Î´Î·Ï‚", play:"ÎŸÏÎ­ÏƒÏ„Î·Ï‚", stats:{ Î¦ÏÏŒÎ½Î·ÏƒÎ·:80, Î‘Î½Î´ÏÎµÎ¯Î±:83, Î¤ÏÎ±Î³Î¹ÎºÏŒÎ ÎµÏ€ÏÏ‰Î¼Î­Î½Î¿:88,  ÎˆÏÏ‰Ï‚:38, Î”ÏŒÎ»Î¿Ï‚:35, Î•Ï€Î¹ÏÏÎ¿Î®:82 } },

  { name:"Î™Ï€Ï€ÏŒÎ»Ï…Ï„Î¿Ï‚", author:"Î•Ï…ÏÎ¹Ï€Î¯Î´Î·Ï‚", play:"Î™Ï€Ï€ÏŒÎ»Ï…Ï„Î¿Ï‚", stats:{ Î¦ÏÏŒÎ½Î·ÏƒÎ·:78, Î‘Î½Î´ÏÎµÎ¯Î±:82, Î¤ÏÎ±Î³Î¹ÎºÏŒÎ ÎµÏ€ÏÏ‰Î¼Î­Î½Î¿:88,  ÎˆÏÏ‰Ï‚:30, Î”ÏŒÎ»Î¿Ï‚:10, Î•Ï€Î¹ÏÏÎ¿Î®:72 } },
  { name:"Î¦Î±Î¯Î´ÏÎ±", author:"Î•Ï…ÏÎ¹Ï€Î¯Î´Î·Ï‚", play:"Î™Ï€Ï€ÏŒÎ»Ï…Ï„Î¿Ï‚", stats:{ Î¦ÏÏŒÎ½Î·ÏƒÎ·:70, Î‘Î½Î´ÏÎµÎ¯Î±:58, Î¤ÏÎ±Î³Î¹ÎºÏŒÎ ÎµÏ€ÏÏ‰Î¼Î­Î½Î¿:92,  ÎˆÏÏ‰Ï‚:85, Î”ÏŒÎ»Î¿Ï‚:25, Î•Ï€Î¹ÏÏÎ¿Î®:68 } },
  { name:"Î˜Î·ÏƒÎ­Î±Ï‚", author:"Î•Ï…ÏÎ¹Ï€Î¯Î´Î·Ï‚", play:"Î™Ï€Ï€ÏŒÎ»Ï…Ï„Î¿Ï‚", stats:{ Î¦ÏÏŒÎ½Î·ÏƒÎ·:75, Î‘Î½Î´ÏÎµÎ¯Î±:88, Î¤ÏÎ±Î³Î¹ÎºÏŒÎ ÎµÏ€ÏÏ‰Î¼Î­Î½Î¿:80,  ÎˆÏÏ‰Ï‚:35, Î”ÏŒÎ»Î¿Ï‚:20, Î•Ï€Î¹ÏÏÎ¿Î®:74 } }
];

/* ===== Î§ÏÎ®ÏƒÎ¹Î¼Î± ===== */
var TILE_COLORS=[ getVar('--tile1'), getVar('--tile2'), getVar('--tile3'), getVar('--tile4'), getVar('--tile5'), getVar('--tile6') ];
function getVar(n){ return getComputedStyle(document.documentElement).getPropertyValue(n).trim(); }
function shuffle(a){a=a.slice();for(var i=a.length-1;i>0;i--){var j=(Math.random()*(i+1))|0;var t=a[i];a[i]=a[j];a[j]=t;}return a;}
function el(id){return document.getElementById(id)}
function log(msg){var lb=el('logBox'); lb.innerHTML += msg+"<br/>"; lb.scrollTop = lb.scrollHeight;}

/* ===== Î¦ÏŒÏÏ„Ï‰ÏƒÎ· ÎµÎ¹ÎºÏŒÎ½Ï‰Î½ (Ï€Î»Î¬Ï„ÎµÏ‚ & thumbnails) ===== */
var imageMap = {}; // name -> url Î® null
function preloadCardBackImages(){
  imageMap = {};
  for(var i=0;i<deck.length;i++){
    (function(card){
      var name = card.name;
      var url  = encodeURIComponent(name) + ".jpg";
      var img  = new Image();
      img.onload  = function(){ imageMap[name] = url; };
      img.onerror = function(){ imageMap[name] = null; };
      img.src = url;
    })(deck[i]);
  }
}

/* ===== ÎšÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ· ===== */
var deck=[], categoryKeys=[];
var numTeams=4, teams=[], activeTeam=0, pot=[], roundNum=0, revealed=false, chosenCategory=null, inPlay=false;
var unused=[];

/* ===== Î£Ï„Î¿Î¹Ï‡ÎµÎ¯Î± DOM ===== */
var teamCountEl=el('teamCount'), decBtn=el('decTeams'), incBtn=el('incTeams'), teamEditEl=el('teamEdit');
var startBtn=el('startBtn'), resetBtn=el('resetBtn'), importBtn=el('importBtn'), fileInput=el('fileInput'), randomBtn=el('randomizeColors');
var activeTeamNameEl=el('activeTeamName'), potCountEl=el('potCount'), roundNumEl=el('roundNum'), deckSizeEl=el('deckSize'), unusedEl=el('unusedCount');
var teamsAreaEl=el('teamsArea'), categoryButtonsEl=el('categoryButtons');
var revealBtn=el('revealBtn'), nextBtn=el('nextBtn'), statusEl=el('status'), statusTieEl=el('statusTie'), scoreboardEl=el('scoreboard');
var infoBtn=el('infoBtn'), infoModal=el('infoModal'), infoClose=el('infoClose'), infoBackdrop=el('infoBackdrop');

/* ===== UI Builders ===== */
function rebuildTeamEditors(){
  teamEditEl.innerHTML='';
  for(var i=0;i<numTeams;i++){
    var wrap=document.createElement('div'); wrap.className='pill';
    var sw=document.createElement('span'); sw.className='swatch'; sw.style.background=TILE_COLORS[i%TILE_COLORS.length];
    var input=document.createElement('input'); input.type='text'; input.placeholder='ÎŸÎ¼Î¬Î´Î± '+(i+1); input.value=(teams[i]&&teams[i].name)||('ÎŸÎ¼Î¬Î´Î± '+(i+1));
    input.oninput=(function(ix,inp){return function(){ if(teams[ix]) teams[ix].name=inp.value||('ÎŸÎ¼Î¬Î´Î± '+(ix+1)); renderHUD(); renderScoreboard(); };})(i,input);
    wrap.appendChild(sw); wrap.appendChild(input); teamEditEl.appendChild(wrap);
  }
}
function buildCategoryButtons(){
  categoryButtonsEl.innerHTML='';
  for(var i=0;i<categoryKeys.length;i++){
    (function(k){
      var b=document.createElement('button'); b.textContent=k;
      b.onclick=function(){ selectCategory(k); };
      categoryButtonsEl.appendChild(b);
    })(categoryKeys[i]);
  }
}

/* ===== Rendering ===== */
function renderHUD(){
  activeTeamNameEl.textContent = inPlay ? (teams[activeTeam]?teams[activeTeam].name:'â€”') : 'â€”';
  potCountEl.textContent = pot.length; roundNumEl.textContent = roundNum; deckSizeEl.textContent = deck.length; unusedEl.textContent = unused.length;
}
function statDiv(key, value, clickable){
  var st=document.createElement('div'); st.className='stat'; if(clickable) st.title='Î•Ï€Î¹Î»Î¿Î³Î®: '+key;
  var s1=document.createElement('span'); s1.textContent=key; var s2=document.createElement('span'); s2.textContent=value;
  st.appendChild(s1); st.appendChild(s2); return st;
}
function renderTeams(){
  teamsAreaEl.innerHTML='';
  for(var idx=0; idx<teams.length; idx++){
    var team=teams[idx];
    var box=document.createElement('div'); box.className='teambox';
    box.style.background = TILE_COLORS[idx%TILE_COLORS.length];
    box.style.backgroundImage = 'linear-gradient(180deg, rgba(255,255,255,.25), rgba(0,0,0,.05))';
    if(inPlay && idx===activeTeam) box.classList.add('turn'); if(team.hand.length===0) box.classList.add('out');

    var hdr=document.createElement('div'); hdr.className='teamhdr';
    var left=document.createElement('div'); left.className='hdr-left';
    var name=document.createElement('span'); name.textContent=team.name;
    left.appendChild(name);
    var cnt=document.createElement('span'); cnt.className='countBig'; cnt.textContent=team.hand.length+' ÎºÎ¬ÏÏ„ÎµÏ‚';
    hdr.appendChild(left); hdr.appendChild(cnt);

    var inner=document.createElement('div'); var topId=team.hand[0];

    if(team.hand.length===0){
      var back=document.createElement('div'); back.className='card-back'; back.textContent='Î¤Î­Î»Î¿Ï‚'; inner.appendChild(back);
    } else {
      if(!revealed && idx!==activeTeam){
        var back2=document.createElement('div');
        var cTop  = deck[topId];
        var imgUrl = imageMap[cTop.name];
        if(imgUrl){
          back2.className = 'card-back imgback';
          back2.style.backgroundImage = "url('"+imgUrl+"')";
        } else {
          back2.className = 'card-back';
          back2.innerHTML = '<div style="text-align:center;"><div style="font-size:24px;font-weight:900;">Î¤ÏÎ±Î³Î¹ÎºÎ¿Î¯ Î‰ÏÏ‰ÎµÏ‚</div><div class="foot">Î Î»Î¬Ï„Î· ÎšÎ¬ÏÏ„Î±Ï‚</div></div>';
        }
        inner.appendChild(back2);
      } else {
        var c=deck[topId]; var card=document.createElement('div'); card.className='card';

        /* === Î¤Î¯Ï„Î»Î¿Ï‚ Î¼Îµ Î¼Î¹ÎºÏÎ¿-ÎµÎ¹ÎºÎ¿Î½Î¯Î´Î¹Î¿ + Î¼ÎµÏ„Î±Î´ÎµÎ´Î¿Î¼Î­Î½Î± === */
        var title=document.createElement('div'); title.className='card-title';
        var tl=document.createElement('div'); tl.className='title-left';
        var thumb=document.createElement('div'); thumb.className='thumb';
        var faceUrl = imageMap[c.name];
        if(faceUrl){ thumb.style.backgroundImage = "url('"+faceUrl+"')"; }
        tl.appendChild(thumb);

        var cb=document.createElement('div'); cb.className='char-block';
        var nm=document.createElement('div'); nm.className='char-name'; nm.textContent=c.name;
        var meta=document.createElement('div'); meta.className='char-meta'; meta.textContent=(c.author||'') + (c.play?(' â€” '+c.play):'');
        cb.appendChild(nm); cb.appendChild(meta);
        tl.appendChild(cb);

        title.appendChild(tl);
        /* Î´ÎµÎ½ Ï‡ÏÎµÎ¹Î±Î¶ÏŒÎ¼Î±ÏƒÏ„Îµ tag Î´ÎµÎ¾Î¹Î¬ */

        var stats=document.createElement('div'); stats.className='stats';
        for(var ki=0;ki<categoryKeys.length;ki++){
          var key=categoryKeys[ki]; var st=statDiv(key, c.stats[key], idx===activeTeam && !revealed);
          if(idx===activeTeam && !revealed){ (function(k,el){ el.onclick=function(){ selectCategory(k); }; })(key, st); }
          if(chosenCategory===key) st.classList.add('active');
          stats.appendChild(st);
        }
        var foot=document.createElement('div'); foot.className='foot';
        foot.textContent = (!revealed ? (idx===activeTeam?'Î Î¬Ï„Î·ÏƒÎµ ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯Î± Î³Î¹Î± ÎµÏ€Î¹Î»Î¿Î³Î®':'ÎšÏÏ…Ï†ÏŒ Î­Ï‰Ï‚ Ï„Î·Î½ Î±Ï€Î¿ÎºÎ¬Î»Ï…ÏˆÎ·') : '');

        card.appendChild(title); card.appendChild(stats); card.appendChild(foot); inner.appendChild(card);
      }
    }

    box.appendChild(hdr); box.appendChild(inner); teamsAreaEl.appendChild(box);
  }
}
function renderScoreboard(){
  scoreboardEl.innerHTML='';
  for(var i=0;i<teams.length;i++){
    var row=document.createElement('div'); row.className='scoreRow';
    var left=document.createElement('div'); left.className='scoreLeft';
    var sw=document.createElement('span'); sw.className='swatch'; sw.style.background=TILE_COLORS[i%TILE_COLORS.length];
    var name=document.createElement('strong'); name.textContent=teams[i].name;
    left.appendChild(sw); left.appendChild(name);
    var right=document.createElement('div');
    var cards=document.createElement('span'); cards.className='pill'; cards.textContent='ÎšÎ¬ÏÏ„ÎµÏ‚: '+teams[i].hand.length;
    right.appendChild(cards);
    row.appendChild(left); row.appendChild(right);
    scoreboardEl.appendChild(row);
  }
}
function renderAll(){ renderHUD(); renderTeams(); renderScoreboard(); revealBtn.disabled = !inPlay || !chosenCategory || revealed; nextBtn.disabled = !inPlay || !revealed; }

/* ===== Î¡Î¿Î® Ï€Î±Î¹Ï‡Î½Î¹Î´Î¹Î¿Ï ===== */
function applyTeamCount(){
  numTeams = parseInt(teamCountEl.value,10)||4; if(numTeams<2) numTeams=2; if(numTeams>6) numTeams=6; teamCountEl.value = String(numTeams);
  while(teams.length<numTeams) teams.push({name:'ÎŸÎ¼Î¬Î´Î± '+(teams.length+1), hand:[]}); teams = teams.slice(0,numTeams);
  rebuildTeamEditors();
}
function startGame(){
  if(numTeams<2){alert('Î§ÏÎµÎ¹Î¬Î¶Î¿Î½Ï„Î±Î¹ Ï„Î¿Ï…Î»Î¬Ï‡Î¹ÏƒÏ„Î¿Î½ 2 Î¿Î¼Î¬Î´ÎµÏ‚');return;}
  teams=[]; var inputs=teamEditEl.querySelectorAll('input');
  for(var i=0;i<numTeams;i++){ var nm=inputs[i]?inputs[i].value:('ÎŸÎ¼Î¬Î´Î± '+(i+1)); teams.push({name:nm||('ÎŸÎ¼Î¬Î´Î± '+(i+1)), hand:[]}); }

  var ids=[]; for(var d=0; d<deck.length; d++) ids.push(deck[d]._id);
  var shuffled=shuffle(ids);
  var remainder = shuffled.length % numTeams;   // Î¼Îµ 25, Î³Î¹Î± 5 Î¿Î¼Î¬Î´ÎµÏ‚ -> 0, Î±Î»Î»Î¹ÏÏ‚ -> 1
  var dealCount = shuffled.length - remainder;  // Î±Ï†Î®Î½Î¿Ï…Î¼Îµ 0 Î® 1 ÎµÎºÏ„ÏŒÏ‚
  var dealIds = shuffled.slice(0, dealCount);
  unused = shuffled.slice(dealCount);

  for(var k=0;k<dealIds.length;k++){ teams[k % numTeams].hand.push(dealIds[k]); }

  activeTeam=0; pot=[]; roundNum=1; revealed=false; chosenCategory=null; inPlay=true;
  statusEl.style.display='none'; statusTieEl.style.display='none';
  log('ÎˆÎ½Î±ÏÎ¾Î· Î¼Îµ '+numTeams+' Î¿Î¼Î¬Î´ÎµÏ‚. Î•ÎºÏ„ÏŒÏ‚ Ï„ÏÎ¬Ï€Î¿Ï…Î»Î±Ï‚: '+unused.length+'.');
  renderAll();
}
function resetGame(){
  deck=[]; for(var i=0;i<DEFAULT_DECK.length;i++){ var c=DEFAULT_DECK[i]; deck.push({ name:c.name, author:c.author, play:c.play, stats:c.stats, _id:i }); }
  categoryKeys=Object.keys(deck[0].stats);
  preloadCardBackImages();
  applyTeamCount();
  activeTeam=0; pot=[]; roundNum=0; revealed=false; chosenCategory=null; inPlay=false; unused=[];
  statusEl.style.display='none'; statusTieEl.style.display='none'; el('logBox').innerHTML='';
  buildCategoryButtons();
  renderAll();
  log('Î•Ï€Î±Î½Î±Ï†Î¿ÏÎ¬. ÎœÎ­Î³ÎµÎ¸Î¿Ï‚ Ï„ÏÎ¬Ï€Î¿Ï…Î»Î±Ï‚: '+deck.length+'.');
}
function nextRound(){
  var alive=teams.filter(function(t){return t.hand.length>0;});
  if(alive.length<=1){ inPlay=false; statusEl.style.display='block'; statusEl.textContent='ğŸ Î¤Î­Î»Î¿Ï‚ Ï€Î±Î¹Ï‡Î½Î¹Î´Î¹Î¿Ï! ÎÎ¹ÎºÎ·Ï„Î®Ï‚: '+(alive[0]?alive[0].name:'â€”'); nextBtn.disabled=true; log('Î¤Î­Î»Î¿Ï‚.'); return; }
  revealed=false; chosenCategory=null; statusEl.style.display='none'; statusTieEl.style.display='none'; roundNum++; renderAll();
  log('Î“ÏÏÎ¿Ï‚ '+roundNum+'. Î•Ï€Î¹Î»Î¿Î³Î®: '+teams[activeTeam].name);
}

/* ===== Î›Î¿Î³Î¹ÎºÎ® Î³ÏÏÎ¿Ï… ===== */
function selectCategory(cat){
  if(!inPlay || revealed) return;
  chosenCategory = cat; log('Î•Ï€Î¹Î»Î­Ï‡Î¸Î·ÎºÎµ ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯Î±: '+cat+'. Î Î¬Ï„Î·ÏƒÎµ Â«Î‘Ï€Î¿ÎºÎ¬Î»Ï…ÏˆÎ· & Î£ÏÎ³ÎºÏÎ¹ÏƒÎ·Â».'); renderAll();
}
function revealAndResolve(){
  if(!inPlay || !chosenCategory || revealed) return;
  revealed = true;

  var plays = teams.map(function(t){ return t.hand.length ? t.hand[0] : null; });
  var maxVal=-Infinity, winners=[];
  for(var i=0;i<plays.length;i++){
    var id=plays[i]; if(id==null) continue;
    var val=deck[id].stats[chosenCategory];
    if(val>maxVal){ maxVal=val; winners=[i]; } else if(val===maxVal){ winners.push(i); }
  }
  var roundCards=plays.filter(function(x){return x!=null;});

  if(winners.length===1){
    for(var t=0;t<teams.length;t++){ if(teams[t].hand.length) teams[t].hand.shift(); }
    var w=winners[0]; var won=pot.concat(roundCards); pot=[];
    teams[w].hand=teams[w].hand.concat(won);
    activeTeam=w;
    statusEl.style.display='block'; statusEl.textContent='âœ… ÎÎ¯ÎºÎ· Î³Î¹Î± '+teams[w].name+' Î¼Îµ '+chosenCategory+' = '+maxVal+'.';
    statusTieEl.style.display='none'; log(teams[w].name+' Ï€Î®ÏÎµ '+won.length+' ÎºÎ¬ÏÏ„ÎµÏ‚.');
  } else {
    for(var t2=0;t2<teams.length;t2++){ if(teams[t2].hand.length){ var top=teams[t2].hand.shift(); pot.push(top); } }
    statusEl.style.display='none'; statusTieEl.style.display='block';
    statusTieEl.textContent='ğŸ¤ Î™ÏƒÎ¿Ï€Î±Î»Î¯Î± ÏƒÏ„Î¿ '+chosenCategory+' (Ï„Î¹Î¼Î® '+maxVal+'). ÎšÎ¬ÏÏ„ÎµÏ‚ â†’ Î£Ï„Î¿Î¯Î²Î±. ÎŠÎ´Î¹Î± Î¿Î¼Î¬Î´Î± ÎµÏ€Î¹Î»Î­Î³ÎµÎ¹ Î¾Î±Î½Î¬.';
    log('Î™ÏƒÎ¿Ï€Î±Î»Î¯Î±. Î£Ï„Î¿Î¯Î²Î± Ï„ÏÏÎ±: '+pot.length+' ÎºÎ¬ÏÏ„ÎµÏ‚.');
  }

  renderAll();
  // Î¿Ï€Ï„Î¹ÎºÎ® ÎµÏ€Î¹ÏƒÎ®Î¼Î±Î½ÏƒÎ· Î½Î¹ÎºÎ·Ï„Î®
  var teamBoxes = el('teamsArea').children;
  for(var ti=0; ti<teams.length; ti++){
    if(!teamBoxes[ti]) continue;
    var id=plays[ti]; if(id==null) continue;
    var card = teamBoxes[ti].querySelector('.card'); if(!card) continue;
    var cells = card.querySelectorAll('.stat');
    for(var ci=0; ci<categoryKeys.length; ci++){
      var key=categoryKeys[ci];
      if(key===chosenCategory && winners.indexOf(ti)>-1){ cells[ci].classList.add('winner'); }
    }
  }

  nextBtn.disabled=false;
}

/* ===== Î£Ï…Î½Î´Î­ÏƒÎµÎ¹Ï‚ ===== */
teamCountEl.onchange = function(){ applyTeamCount(); };
decBtn.onclick = function(){ teamCountEl.value = String(Math.max(2, (parseInt(teamCountEl.value,10)||4) - 1)); applyTeamCount(); };
incBtn.onclick = function(){ teamCountEl.value = String(Math.min(6, (parseInt(teamCountEl.value,10)||4) + 1)); applyTeamCount(); };

randomBtn.onclick=function(){ TILE_COLORS = shuffle(TILE_COLORS); renderTeams(); renderScoreboard(); };
startBtn.onclick=startGame; resetBtn.onclick=resetGame; nextBtn.onclick=nextRound; el('revealBtn').onclick=revealAndResolve;

importBtn.onclick=function(){ fileInput.click(); };
fileInput.onchange=function(e){
  var f=e.target.files && e.target.files[0]; if(!f) return;
  var reader=new FileReader();
  reader.onload=function(){
    try{
      var arr=JSON.parse(reader.result);
      if(!Array.isArray(arr) || !arr.length || !arr[0].stats) throw new Error('ÎœÎ· Î­Î³ÎºÏ…ÏÎ¿ JSON Ï„ÏÎ¬Ï€Î¿Ï…Î»Î±Ï‚');
      /* Ï…Ï€Î¿ÏƒÏ„Î·ÏÎ¯Î¶Î¿Ï…Î¼Îµ ÎµÎ¯Ï„Îµ Î½Î­Î± (author/play) ÎµÎ¯Ï„Îµ Ï€Î±Î»Î¹Î¬ (set) Î´Î¿Î¼Î® */
      deck=[];
      for(var i=0;i<arr.length;i++){
        var it=arr[i];
        deck.push({
          name:it.name,
          author:it.author || it.set || '',
          play:it.play || '',
          stats:it.stats,
          _id:i
        });
      }
      categoryKeys=Object.keys(deck[0].stats);
      preloadCardBackImages();
      buildCategoryButtons();
      renderAll();
      alert('Î— Ï„ÏÎ¬Ï€Î¿Ï…Î»Î± Ï†Î¿ÏÏ„ÏÎ¸Î·ÎºÎµ. Î Î¬Ï„Î·ÏƒÎµ Â«ÎˆÎ½Î±ÏÎ¾Î·Â».');
      log('Custom Ï„ÏÎ¬Ï€Î¿Ï…Î»Î±: '+deck.length+' ÎºÎ¬ÏÏ„ÎµÏ‚.');
    }catch(err){ alert('Î‘Ï€Î¿Ï„Ï…Ï‡Î¯Î± ÎµÎ¹ÏƒÎ±Î³Ï‰Î³Î®Ï‚: '+err.message); }
    fileInput.value='';
  };
  reader.readAsText(f);
};

/* Modal ÎŸÎ´Î·Î³Î¹ÏÎ½ */
infoBtn.onclick = function(){ infoModal.classList.add('open'); infoModal.setAttribute('aria-hidden','false'); };
infoClose.onclick = function(){ infoModal.classList.remove('open'); infoModal.setAttribute('aria-hidden','true'); };
infoBackdrop.onclick = infoClose;

/* ===== Init ===== */
(function init(){
  deck=[]; for(var i=0;i<DEFAULT_DECK.length;i++){ var c=DEFAULT_DECK[i]; deck.push({ name:c.name, author:c.author, play:c.play, stats:c.stats, _id:i }); }
  categoryKeys=Object.keys(deck[0].stats);
  preloadCardBackImages();
  applyTeamCount();
  buildCategoryButtons();
  renderAll();
  log('ÎˆÏ„Î¿Î¹Î¼Î¿. Î’Î¬Î»Îµ ÎµÎ¹ÎºÏŒÎ½ÎµÏ‚ (Ï€.Ï‡. ÎŸÎ¹Î´Î¯Ï€Î¿Ï…Ï‚.jpg, ÎœÎ®Î´ÎµÎ¹Î±.jpg) ÏƒÏ„Î¿Î½ Î¯Î´Î¹Î¿ Ï†Î¬ÎºÎµÎ»Î¿ ÎºÎ±Î¹ Ï€Î¬Ï„Î·ÏƒÎµ Â«ÎˆÎ½Î±ÏÎ¾Î·Â».');
})();
</script>
</body>
</html>
